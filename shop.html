<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shop All - Accessories by Waydia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://fonts.googleapis.com/css?family=Playfair+Display:700,400|Montserrat:400,500,700&display=swap"
    rel="stylesheet"
  />
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
  <style>
    /* Reset & base */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: "Montserrat", Arial, sans-serif;
      background: #fffaf7;
      color: #7c5e3c;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    /* Navbar */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.2rem 2rem;
      background: #fff;
      border-bottom: 1px solid #e7dac7;
      flex-wrap: wrap;
    }
    .logo {
      font-family: "Playfair Display", serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: #7c5e3c;
    }
    .nav-links {
      display: flex;
      gap: 1.5rem;
      list-style: none;
      margin: 0;
      padding: 0;
      align-items: center;
      flex-wrap: wrap;
    }
    .nav-links a {
      font-size: 1rem;
      font-weight: 500;
      color: #7c5e3c;
    }
    .cart-icon {
      position: relative;
      cursor: pointer;
      font-size: 1.6rem;
      user-select: none;
    }
    .cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #cc6d8c;
      color: white;
      font-size: 0.7rem;
      border-radius: 50%;
      padding: 2px 6px;
      min-width: 18px;
      text-align: center;
      font-weight: 700;
    }

    /* Container */
    .container {
      max-width: 1200px;
      margin: 1.5rem auto;
      padding: 0 1rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    /* Filters */
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
      justify-content: flex-start;
    }
    .filters label {
      font-weight: 600;
      margin-right: 0.5rem;
    }
    .filters select {
      padding: 0.3rem 0.5rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    /* Shop Grid */
    .shop-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.5rem;
    }
    .product-card {
      background: #f8f1ea;
      border-radius: 15px;
      padding: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .product-card img {
      width: 100%;
      border-radius: 10px;
      cursor: pointer;
      object-fit: contain;
      max-height: 200px;
      margin-bottom: 0.8rem;
      transition: transform 0.3s ease;
    }
    .product-card img:hover {
      transform: scale(1.05);
    }
    .product-card h3 {
      margin: 0 0 0.4rem 0;
      font-weight: 700;
    }
    .product-card p {
      margin: 0 0 0.8rem 0;
      font-weight: 600;
      font-size: 1.1rem;
    }
    .stock {
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
      color: #555;
    }
    .color-select {
      margin-bottom: 0.8rem;
    }
    .btn-buy {
      background: #cc6d8c;
      color: white;
      padding: 0.5rem 1.2rem;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: background 0.3s ease;
    }
    .btn-buy:disabled {
      background: #aaa;
      cursor: not-allowed;
    }
    .btn-buy:hover:not(:disabled) {
      background: #b05975;
    }

    /* Cart Modal */
    .cart-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      padding: 1rem;
    }
    .cart-content {
      background: #fff;
      padding: 1.5rem 2rem;
      border-radius: 10px;
      width: 100%;
      max-width: 480px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      position: relative;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.6rem;
      cursor: pointer;
      color: #999;
      user-select: none;
    }
    .cart-items {
      list-style: none;
      padding: 0;
      margin: 1rem 0;
      max-height: 200px;
      overflow-y: auto;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.8rem;
      border-bottom: 1px solid #ddd;
      padding-bottom: 0.5rem;
    }
    .cart-item-info {
      flex-grow: 1;
    }
    .cart-item-name {
      font-weight: 600;
      margin-bottom: 0.2rem;
    }
    .cart-item-color,
    .cart-item-qty,
    .cart-item-price {
      font-size: 0.9rem;
      color: #555;
    }
    .qty-controls {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      margin-left: 1rem;
    }
    .qty-btn {
      background: #cc6d8c;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.15rem 0.5rem;
      font-weight: 700;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s ease;
    }
    .qty-btn:disabled {
      background: #aaa;
      cursor: not-allowed;
    }
    .qty-btn:hover:not(:disabled) {
      background: #b05975;
    }
    .remove-btn {
      background: transparent;
      border: none;
      color: #cc6d8c;
      cursor: pointer;
      font-weight: 700;
      font-size: 1.1rem;
      user-select: none;
    }
    .remove-btn:hover {
      color: #b05975;
    }
    /* Checkout form */
    .checkout-form label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    .checkout-form input,
    .checkout-form select {
      width: 100%;
      padding: 0.6rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }
    .checkout-form button {
      margin-top: 1.5rem;
      width: 100%;
      background: #cc6d8c;
      color: white;
      padding: 0.7rem;
      font-weight: 700;
      border-radius: 20px;
      border: none;
      cursor: pointer;
      font-size: 1.1rem;
      transition: background 0.3s ease;
    }
    .checkout-form button:hover {
      background: #b05975;
    }
    /* Responsive */
    @media (max-width: 600px) {
      .filters {
        flex-direction: column;
        align-items: flex-start;
      }
      .nav-links {
        flex-wrap: wrap;
        gap: 1rem;
      }
      .cart-content {
        max-width: 100%;
        height: 100%;
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <header class="navbar">
      <div class="logo">Accessories by Waydia</div>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li class="cart-icon" @click="showCart = true" title="View Cart">
          ðŸ›’
          <span v-if="cartCount > 0" class="cart-count">{{ cartCount }}</span>
        </li>
      </ul>
    </header>

    <main class="container">
      <section class="filters" aria-label="Product filters">
        <label for="filter-type">Filter by Type:</label>
        <select id="filter-type" v-model="filters.type">
          <option value="all">All</option>
          <option value="keychain">Keychain</option>
          <option value="clawclip">Claw Clip</option>
        </select>

        <label for="filter-price">Filter by Price:</label>
        <select id="filter-price" v-model="filters.price">
          <option value="all">All</option>
          <option value="under800">Under J$800</option>
          <option value="800to1000">J$800 - J$1000</option>
          <option value="over1000">Over J$1000</option>
        </select>

        <label for="currency-select">Currency:</label>
        <select id="currency-select" v-model="currency" @change="updateCurrency">
          <option value="JMD">JMD (J$)</option>
          <option value="USD">USD ($)</option>
          <option value="GBP">GBP (Â£)</option>
        </select>
      </section>

      <section class="shop-grid" aria-label="Products listing">
        <div
          class="product-card"
          v-for="product in filteredProducts"
          :key="product.id"
        >
          <a :href="product.image" target="_blank" :aria-label="`View ${product.name} image`">
            <img :src="product.image" :alt="product.name" />
          </a>
          <h3>{{ product.name }}</h3>
          <p>{{ formattedPrice(product.price) }}</p>
          <div class="stock" :style="{color: product.stock === 0 ? '#cc6d8c' : '#555'}">
            <strong>Stock:</strong> {{ product.stock > 0 ? product.stock : 'Out of stock' }}
          </div>
          <div v-if="product.type === 'clawclip'" class="color-select">
            <label :for="`color-${product.id}`">Choose Color:</label>
            <select :id="`color-${product.id}`" v-model="product.selectedColor">
              <option
                v-for="color in product.colors"
                :value="color"
                :key="color"
              >{{ color }}</option>
            </select>
          </div>
          <button
            class="btn-buy"
            :disabled="product.stock === 0"
            @click="addToCart(product)"
          >
            Add to Cart
          </button>
        </div>
      </section>
    </main>

    <!-- Cart Modal -->
    <div v-if="showCart" class="cart-modal" role="dialog" aria-modal="true" aria-labelledby="cart-title">
      <div class="cart-content">
        <span class="close-btn" @click="showCart = false" aria-label="Close cart">&times;</span>
        <h2 id="cart-title">Your Cart ({{ cartCount }} items)</h2>
        <ul class="cart-items" v-if="cart.length > 0">
          <li
            class="cart-item"
            v-for="(item, index) in cart"
            :key="item.id + '-' + item.color"
          >
            <div class="cart-item-info">
              <div class="cart-item-name">{{ item.name }}</div>
              <div class="cart-item-color" v-if="item.color">Color: {{ item.color }}</div>
              <div class="cart-item-price">{{ formattedPrice(item.price) }} each</div>
            </div>
            <div class="qty-controls" aria-label="Quantity controls">
              <button
                class="qty-btn"
                @click="decreaseQty(index)"
                :disabled="item.qty === 1"
                aria-label="Decrease quantity"
              >-</button>
              <span class="cart-item-qty" aria-live="polite">{{ item.qty }}</span>
              <button
                class="qty-btn"
                @click="increaseQty(index)"
                :disabled="item.qty >= item.stock"
                aria-label="Increase quantity"
              >+</button>
            </div>
            <button
              class="remove-btn"
              @click="removeItem(index)"
              aria-label="Remove item"
              title="Remove from cart"
            >Ã—</button>
          </li>
        </ul>
        <p v-else>Your cart is empty.</p>
        <h3>Total: {{ formattedPrice(cartTotal) }}</h3>

        <form
          class="checkout-form"
          @submit.prevent="submitOrder"
          action="https://formspree.io/f/yourFormID"
          method="POST"
          v-if="cart.length > 0"
          aria-label="Checkout form"
        >
          <label for="name">Full Name:</label>
          <input
            type="text"
            id="name"
            name="name"
            v-model="order.name"
            required
            autocomplete="name"
          />

          <label for="email">Email Address:</label>
          <input
            type="email"
            id="email"
            name="_replyto"
            v-model="order.email"
            required
            autocomplete="email"
          />

          <label for="phone">Phone Number:</label>
          <input
            type="tel"
            id="phone"
            name="phone"
            v-model="order.phone"
            required
            autocomplete="tel"
          />

          <label for="address">Shipping Address:</label>
          <input
            type="text"
            id="address"
            name="address"
            v-model="order.address"
            required
            autocomplete="shipping street-address"
          />

          <label for="order-details">Order Details:</label>
          <textarea
            id="order-details"
            name="orderDetails"
            readonly
            :value="orderSummary"
            rows="4"
            style="resize:none; background:#f8f1ea; border:none; padding:0.5rem;"
          ></textarea>

          <!-- Honeypot to block spam -->
          <input type="text" name="_gotcha" style="display:none" />

          <button type="submit">Place Order</button>
        </form>
        <p v-if="orderSuccess" style="color: green; margin-top: 1rem;">
          Thank you for your order! We will contact you soon.
        </p>
      </div>
    </div>
  </div>

  <script>
    new Vue({
      el: "#app",
      data() {
        return {
          currency: "JMD",
          rates: {
            JMD: 1,
            USD: 0.0065,
            GBP: 0.0052,
          },
          filters: {
            type: "all",
            price: "all",
          },
          products: [
            {
              id: 1,
              name: "Pearl Bow Heart Keychain",
              price: 700,
              stock: 20,
              type: "keychain",
              image: "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/%F0%9F%96%A4%F0%9F%94%97.jpg?raw=true",
              colors: [],
            },
            {
              id: 2,
              name: "Puppy Teddy Pendant",
              price: 800,
              stock: 15,
              type: "keychain",
              image: "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H78c602610c1c4a27b48322f6a0ac9b8be.webp",
              colors: [],
            },
            {
              id: 3,
              name: "Batman Lego Keychain",
              price: 850,
              stock: 10,
              type: "keychain",
              image: "https://i.ibb.co/3hfNrWx/batman-lego-keychain.webp",
              colors: [],
            },
            {
              id: 4,
              name: "Miu Style Cat Head Keychain",
              price: 1000,
              stock: 5,
              type: "keychain",
              image: "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H4b7310a3a1dc460cb166048ca80bf69e0.webp",
              colors: [],
            },
            {
              id: 5,
              name: "Dachshund Keychain",
              price: 1000,
              stock: 8,
              type: "keychain",
              image: "https://i.ibb.co/R7dZRmH/dachshund.webp",
              colors: [],
            },
            {
              id: 6,
              name: "Tennis Racket Keychain",
              price: 1000,
              stock: 12,
              type: "keychain",
              image: "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H7deef4f9cf394e708254b291e3610bf7w.webp",
              colors: [],
            },
            {
              id: 7,
              name: "Tennis Racket Keychain + Bible",
              price: 1100,
              stock: 4,
              type: "keychain",
              image: "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H4082d5e9abc343d796c724005550d886h.webp",
              colors: [],
            },
            {
              id: 8,
              name: "Claw Clip",
              price: 400,
              stock: 25,
              type: "clawclip",
              image: "https://i.ibb.co/gjFzG9T/clawclip1.webp",
              colors: ["Yellow", "Pink", "Blue", "Orange", "Green"],
              selectedColor: "Yellow",
            },
            {
              id: 9,
              name: "Claw Clip",
              price: 400,
              stock: 18,
              type: "clawclip",
              image: "https://i.ibb.co/5sWmBBr/clawclip2.webp",
              colors: ["Yellow", "Pink", "Blue", "Orange", "Green"],
              selectedColor: "Yellow",
            },
            {
              id: 10,
              name: "Claw Clip",
              price: 400,
              stock: 20,
              type: "clawclip",
              image: "https://i.ibb.co/tM8FTTX/clawclip3.webp",
              colors: ["Yellow", "Pink", "Blue", "Orange", "Green"],
              selectedColor: "Yellow",
            },
          ],
          cart: [],
          showCart: false,
          order: {
            name: "",
            email: "",
            phone: "",
            address: "",
          },
          orderSuccess: false,
        };
      },
      computed: {
        filteredProducts() {
          let filtered = this.products;

          // Filter by type
          if (this.filters.type !== "all") {
            filtered = filtered.filter((p) => p.type === this.filters.type);
          }

          // Filter by price
          if (this.filters.price !== "all") {
            if (this.filters.price === "under800") {
              filtered = filtered.filter((p) => p.price < 800);
            } else if (this.filters.price === "800to1000") {
              filtered = filtered.filter(
                (p) => p.price >= 800 && p.price <= 1000
              );
            } else if (this.filters.price === "over1000") {
              filtered = filtered.filter((p) => p.price > 1000);
            }
          }
          return filtered;
        },
        cartCount() {
          return this.cart.reduce((acc, item) => acc + item.qty, 0);
        },
        cartTotal() {
          return this.cart.reduce(
            (acc, item) => acc + item.price * item.qty,
            0
          );
        },
        orderSummary() {
          return this.cart
            .map(
              (item) =>
                `${item.name} ${
                  item.color ? "(" + item.color + ")" : ""
                } x${item.qty} - ${this.formattedPrice(item.price * item.qty)}`
            )
            .join("\n");
        },
      },
      methods: {
        formattedPrice(jmdPrice) {
          const rate = this.rates[this.currency];
          let converted = jmdPrice * rate;
          let symbol = "";

          switch (this.currency) {
            case "USD":
              symbol = "$";
              break;
            case "GBP":
              symbol = "Â£";
              break;
            default:
              symbol = "J$";
          }

          return symbol + converted.toFixed(2);
        },
        addToCart(product) {
          // Compose unique cart id with color if any
          const id = product.id + (product.selectedColor ? "-" + product.selectedColor : "");

          const cartItem = this.cart.find((item) => item.id === id);

          if (cartItem) {
            if (cartItem.qty < product.stock) {
              cartItem.qty++;
            }
          } else {
            this.cart.push({
              id: id,
              name: product.name,
              price: product.price,
              qty: 1,
              color: product.selectedColor || null,
              stock: product.stock,
            });
          }
          this.showCart = true;
        },
        removeItem(index) {
          this.cart.splice(index, 1);
        },
        increaseQty(index) {
          const item = this.cart[index];
          if (item.qty < item.stock) {
            item.qty++;
          }
        },
        decreaseQty(index) {
          const item = this.cart[index];
          if (item.qty > 1) {
            item.qty--;
          }
        },
        submitOrder() {
          // Normally submit form to Formspree or backend API
          // Here simulate success and clear cart + form
          alert("Order submitted! We'll contact you soon.");
          this.orderSuccess = true;
          this.cart = [];
          this.order = {
            name: "",
            email: "",
            phone: "",
            address: "",
          };
          this.showCart = false;
        },
      },
    });
  </script>
</body>
</html>
