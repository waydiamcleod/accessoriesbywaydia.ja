<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shop All - Accessories by Waydia</title>
  <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,400|Montserrat:400,500,700&display=swap" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    html, body { max-width: 100vw; overflow-x: hidden; }
    body {margin:0;padding:0;font-family:'Montserrat',Arial,sans-serif;background:#fffaf7;color:#7c5e3c;}
    a { color: inherit; text-decoration: none; }
    .navbar {
      min-height: 64px;
      height: 64px;
      padding: 0 1.5rem;
      display: flex;
      align-items: center;
      background: #fff;
      border-bottom: 1px solid #e7dac7;
      flex-wrap: wrap;
      justify-content: space-between;
      position: relative;
      z-index: 1010;
    }
    .logo {font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700;color:#7c5e3c;}
    .nav-links {
      display: flex;
      gap: 1.5rem;
      list-style: none;
      margin: 0;
      padding: 0;
      align-items: center;
    }
    .nav-links a {font-size:1rem;font-weight:500;color:#7c5e3c;text-decoration:none;transition: color 0.18s;padding-bottom:0.1em;border-bottom:2px solid transparent;}
    .nav-links a:hover, .nav-links a:focus {color:#a0846a;border-bottom:2px solid #a0846a;}
    .cart-count {position:absolute;top:-8px;right:-8px;background:#cc6d8c;color:white;font-size:0.7rem;border-radius:50%;padding:2px 6px;}
    .filters {display:flex;flex-wrap:wrap;gap:1rem;padding:1rem;justify-content:center;align-items:center;background:#f0e6db;border-radius:10px;margin:1rem;}
    .filters label {font-size:0.9rem;color:#7c5e3c;}
    .filters input[type="text"] {padding:0.4rem 0.8rem;border-radius:5px;border:1px solid #ccc;font-size:1rem;min-width:180px;}
    .shop-grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;padding:1rem;box-sizing:border-box;max-width:100vw;}
    .product-card {background:#f8f1ea;border-radius:15px;padding:1rem;box-shadow:0 4px 12px rgba(0,0,0,0.05);text-align:center;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;box-sizing:border-box;max-width:100vw;}
    .product-details-modal {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
    }
    .product-details-content {
      background: #fffaf7;
      border-radius: 15px;
      width: 370px;
      max-width: 95vw;
      max-height: 80vh;
      overflow-y: auto;
      padding: 1.5rem 1.2rem 2rem;
      position: relative;
      box-shadow: 0 6px 36px rgba(0,0,0,0.16);
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .product-details-content .close-btn {
      position: absolute;
      right: 1.1rem;
      top: 1.1rem;
      font-size: 1.6rem;
      color: #cc6d8c;
      cursor: pointer;
    }
    @media (max-width: 600px) {
      .product-details-content {
        width: 95vw;
        max-width: 90vw;
        padding: 0.7rem 0.3rem 1.3rem;
      }
    }
    .product-slider {position:relative;width:100%;max-width:180px;height:180px;margin:0 auto 0.5rem auto;}
    .product-slider img {width:100%;height:180px;object-fit:cover;border-radius:10px;}
    .slider-dots {display: flex;justify-content: center;margin-top: 8px;gap: 8px;}
    .slider-dot {width: 10px;height: 10px;border-radius: 50%;background: #ccc;display: inline-block;cursor: pointer;transition: background 0.2s;}
    .slider-dot.active {background: #cc6d8c;}
    .product-card h3, .product-card p {word-break: break-word;overflow-wrap: break-word;}
    .product-card h3 {margin:0.8rem 0 0.3rem;}
    .btn-buy {background:#cc6d8c;color:white;padding:0.5rem 1.2rem;border-radius:20px;font-weight:600;cursor:pointer;border:none;margin-top:0.7rem;font-size:1.1rem;transition:all 0.15s;}
    .btn-buy:disabled {background:#ccc;cursor:not-allowed;}
    .stock-info {font-size:0.8rem;color:#a0445e;margin-top:0.3rem;}
    /* Floating Cart Icon Button */
    .floating-cart-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: #cc6d8c;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 58px;
      height: 58px;
      box-shadow: 0 4px 14px rgba(204,109,140,0.25);
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 3002;
      transition: background 0.18s, transform 0.16s;
    }
    .floating-cart-btn:hover, .floating-cart-btn:focus {
      background: #a0846a;
      transform: scale(1.08);
    }
    .cart-count-float {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #fff;
      color: #cc6d8c;
      font-size: 0.95rem;
      font-weight: bold;
      border-radius: 50%;
      padding: 1.5px 6px;
      pointer-events: none;
    }
    /* Floating Cart Panel Styles */
    .floating-cart-panel {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 340px;
      max-width: 95vw;
      background: #fff;
      box-shadow: 0 6px 24px rgba(0,0,0,0.18);
      border-radius: 14px;
      z-index: 3001;
      padding: 0;
      overflow-y: auto;
      max-height: 80vh;
      transition: box-shadow 0.2s, opacity 0.2s;
      display: none;
      flex-direction: column;
      opacity: 0;
      pointer-events: none;
    }
    .floating-cart-panel.open {
      display: flex;
      opacity: 1;
      pointer-events: auto;
      animation: slideIn 0.25s;
    }
    @keyframes slideIn {
      from { transform: translateY(40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .floating-cart-panel .cart-content {
      padding: 1.2rem 1rem 1.5rem 1rem;
      width: 100%;
      height: auto;
      overflow-y: auto;
      position: relative;
    }
    .floating-cart-panel .close-btn {
      position: absolute;
      right: 1rem;
      top: 1rem;
      font-size: 1.6rem;
      cursor: pointer;
      color: #cc6d8c;
      background: none;
      border: none;
    }
    @media (max-width:600px) {
      .shop-grid {grid-template-columns: repeat(2, 1fr);gap: 0.8rem;padding: 0.5rem;}
      .product-card {padding: 0.5rem;}
      .filters {flex-direction: column;gap: 0.6rem;padding: 0.5rem;margin: 0.5rem;width: 100%;box-sizing:border-box;}
      .floating-cart-panel, .floating-cart-btn {
        right: 2vw;
        bottom: 2vw;
      }
      .floating-cart-panel {
        width: 100vw !important;
        right: 0 !important;
        left: 0 !important;
        bottom: 0 !important;
        border-radius: 0 !important;
        max-height: 100vh !important;
      }
      .floating-cart-panel .cart-content {
        padding: 1rem 0.5rem 1.2rem 0.5rem !important;
      }
      .floating-cart-btn {
        width: 50px;
        height: 50px;
        font-size: 1.45rem;
      }
      .cart-count-float {
        top: 8px;
        right: 8px;
        font-size: 0.8rem;
      }
    }
    .quantity-control {display:flex;align-items:center;gap:0.4rem;}
    .quantity-control button {background:#cc6d8c;border:none;color:white;font-weight:700;font-size:1rem;padding:0 10px;cursor:pointer;border-radius:5px;user-select:none;}
    .quantity-control span {min-width:25px;text-align:center;display:inline-block;font-weight:600;}
    .payment-success {padding:1rem;background:#e6ffe6;color:#257a3a;border-radius:7px;margin:1.5rem 0;font-weight:600;text-align:center;}
    .cart-actions {margin-top:1rem;text-align:right;}
    .checkout-btn {background:#7c5e3c;color:#fff;border:none;padding:0.7rem 1.4rem;border-radius:20px;cursor:pointer;font-size:1.08rem;font-weight:600;}
    /* Hamburger menu styles */
    .hamburger {
      display: none;
      flex-direction: column;
      justify-content: center;
      width: 36px;
      height: 36px;
      background: none;
      border: none;
      cursor: pointer;
      gap: 6px;
      margin-left: auto;
      z-index: 2001;
    }
    .hamburger span {
      display: block;
      height: 4px;
      width: 100%;
      background: #7c5e3c;
      border-radius: 2px;
      transition: 0.3s;
      position: relative;
    }
    .hamburger.open span:nth-child(1) {
      transform: rotate(45deg) translate(7px, 7px);
    }
    .hamburger.open span:nth-child(2) {
      opacity: 0;
    }
    .hamburger.open span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    @media (max-width:900px) {
      .hamburger {
        display: flex;
      }
      .nav-links {
        display: none;
        flex-direction: column;
        background: #fff;
        position: absolute;
        top: 64px;
        left: 0;
        width: 100%;
        padding: 1rem 0;
        box-shadow: 0 2px 8px rgba(124,94,60,0.07);
      }
      .nav-links.open {
        display: flex;
        z-index: 2000;
      }
      .navbar {
        position: relative;
        z-index: 1010;
      }
    }
    /* Responsive checkout form styling */
    .checkout-form label {
      display: block;
      margin-top: 1rem;
      font-size: 1rem;
      color: #7c5e3c;
    }
    .checkout-form input,
    .checkout-form select {
      width: 100%;
      padding: 0.6rem 0.8rem;
      margin-top: 0.4rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
      box-sizing: border-box;
    }
    .checkout-form button.checkout-btn {
      width: 100%;
      margin-top: 1.2rem;
    }
    @media (max-width: 900px) {
      .floating-cart-panel {
        width: 96vw !important;
        right: 2vw !important;
        left: unset !important;
        border-radius: 10px !important;
        padding: 0 !important;
        max-height: 90vh !important;
      }
      .floating-cart-panel .cart-content {
        padding: 1rem 0.5rem 1.2rem 0.5rem !important;
      }
    }
    @media (max-width: 600px) {
      .checkout-form label {
        font-size: 0.98rem;
        margin-top: 0.7rem;
      }
      .checkout-form input,
      .checkout-form select {
        font-size: 0.99rem;
        padding: 0.5rem 0.5rem;
      }
      .checkout-form button.checkout-btn {
        font-size: 1.05rem;
        padding: 0.7rem 0;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- HEADER -->
    <header class="navbar">
      <div class="logo">Accessories by Waydia</div>
      <button class="hamburger" :class="{ open: mobileMenu }" @click="mobileMenu = !mobileMenu" aria-label="Toggle navigation">
        <span></span><span></span><span></span>
      </button>
      <ul :class="['nav-links', { open: mobileMenu }]">
        <li><a href="index.html" @click="mobileMenu = false">Home</a></li>
        <li><a href="about.html" @click="mobileMenu = false">About</a></li>
        <li><a href="contact.html" @click="mobileMenu = false">Contact</a></li>
      </ul>
    </header>

    <!-- FILTERS -->
    <section class="filters">
      <label>
        Filter by type:
        <select v-model="filters.type">
          <option value="">All</option>
          <option value="keychain">Keychain</option>
          <option value="hairclip">Hair Clip</option>
          <option value="bagcharm">Bag Charm</option>
          <option value="phoneaccessories">Phone Accessories</option>
          <option value="accessories">Accessories</option>
        </select>
      </label>
      <label>
        Filter by max price:
        <select v-model.number="filters.maxPrice">
          <option :value="Infinity">No limit</option>
          <option :value="500">500 JMD</option>
          <option :value="850">850 JMD</option>
          <option :value="1000">1000 JMD</option>
        </select>
      </label>
      <label>
        Currency:
        <select v-model="currency">
          <option value="JMD">JMD</option>
          <option value="USD">USD</option>
        </select>
      </label>
    </section>

    <!-- SHOP GRID -->
    <section class="shop-grid">
      <div v-for="(product, i) in filteredProducts" :key="product.id + (product.selectedColor || '')" class="product-card" @click="openProduct(product)">
        <div class="product-slider"
          @touchstart="touchStart($event, i)"
          @touchmove="touchMove($event, i)"
          @touchend="touchEnd($event, i)">
          <a v-if="product.stock > 0" :href="product.images[product.currentImage]" target="_blank" @click.stop>
            <img :src="product.images[product.currentImage]" :alt="product.name" />
          </a>
          <img v-else :src="product.images[product.currentImage]" :alt="product.name" style="opacity: 0.5; cursor: not-allowed;" />
          <div class="slider-dots" v-if="product.images && product.images.length > 1">
            <span
              v-for="(img, idx) in product.images"
              :key="idx"
              class="slider-dot"
              :class="{ active: product.currentImage === idx }"
              @click.stop="setImage(i, idx)"
            ></span>
          </div>
        </div>
        <h3>{{ product.name }}</h3>
        <p>
          {{ formatPrice(product.price) }}
          <span class="stock-info" v-if="product.stock <= 5 && product.stock > 0">Only {{ product.stock }} left!</span>
          <span class="stock-info" v-if="product.stock === 0">Out of stock</span>
        </p>
        <div v-if="product.colors && product.colors.length">
          <label>
            Color:
            <select v-model="product.selectedColor" @click.stop>
              <option v-for="color in product.colors" :key="color" :value="color">
                {{ color }}
              </option>
            </select>
          </label>
        </div>
        <button class="btn-buy" @click.stop="addToCart(product)" :disabled="product.stock === 0">Add to Cart</button>
      </div>
    </section>

    <!-- PRODUCT DETAILS MODAL -->
    <div v-if="selectedProduct" class="product-details-modal" @click.self="closeProduct">
      <div class="product-details-content">
        <span class="close-btn" @click="closeProduct">&times;</span>
        <div class="product-slider"
          @touchstart="touchStart($event, -1, true)"
          @touchmove="touchMove($event, -1, true)"
          @touchend="touchEnd($event, -1, true)">
          <img :src="selectedProduct.images[selectedProduct.currentImage]" :alt="selectedProduct.name" />
          <div class="slider-dots" v-if="selectedProduct.images.length > 1">
            <span v-for="(img, idx) in selectedProduct.images"
                  :key="idx"
                  class="slider-dot"
                  :class="{ active: selectedProduct.currentImage === idx }"
                  @click="setProductImage(idx)">
            </span>
          </div>
        </div>
        <h2>{{ selectedProduct.name }}</h2>
        <div style="margin:0.3em 0; line-height:1.4;">
          <div><b>Price:</b> {{ formatPrice(selectedProduct.price) }}</div>
          <div v-if="selectedProduct.material"><b>Material:</b> {{ selectedProduct.material }}</div>
          <div v-if="selectedProduct.description"><b>Description:</b> {{ selectedProduct.description }}</div>
        </div>
        <p v-if="selectedProduct.stock === 0" class="stock-info">Out of stock</p>
        <button class="btn-buy" @click="addToCart(selectedProduct)" :disabled="selectedProduct.stock === 0">Add to Cart</button>
      </div>
    </div>

    <!-- FLOATING CART ICON BUTTON -->
    <button 
      class="floating-cart-btn"
      @click="showFloatingCart = !showFloatingCart"
      aria-label="View Cart"
      style="z-index:3002;"
    >
      🛒
      <span v-if="totalQuantity" class="cart-count-float">{{ totalQuantity }}</span>
    </button>

    <!-- FLOATING CART PANEL -->
    <div class="floating-cart-panel" :class="{ open: showFloatingCart }">
      <div class="cart-content">
        <button class="close-btn" @click="showFloatingCart = false">&times;</button>
        <h2>Your Cart</h2>
        <ul class="cart-items" v-if="cart.length">
          <li v-for="(item, index) in cart" :key="item.id + '-' + (item.color || '')">
            <div>
              {{ item.name }}
              <span v-if="item.color"> ({{ item.color }})</span>
              - {{ formatPrice(item.price) }}
            </div>
            <div class="quantity-control">
              <button @click="decreaseQuantity(index)">−</button>
              <span>{{ item.quantity }}</span>
              <button @click="increaseQuantity(index)">+</button>
            </div>
            <button @click="removeFromCart(index)" title="Remove item" style="background:none; border:none; color:#cc6d8c; font-weight:bold; cursor:pointer;">×</button>
          </li>
        </ul>
        <p v-else>Your cart is empty.</p>
        <h3>Total: {{ formatPrice(cartTotal) }}</h3>
        <div class="cart-actions" v-if="cart.length">
          <button class="checkout-btn" @click="showCheckout = !showCheckout" v-if="!orderSuccess">
            {{ showCheckout ? 'Hide Checkout' : 'Checkout' }}
          </button>
        </div>
        <div v-if="showCheckout && cart.length && !orderSuccess">
          <form class="checkout-form" @submit.prevent="submitOrder">
            <label>
              Name:
              <input type="text" v-model="order.name" required />
            </label>
            <label>
              Email:
              <input type="email" v-model="order.email" required />
            </label>
            <label>
              Phone:
              <input type="tel" v-model="order.phone" required />
            </label>
            <label>
              Address:
              <input type="text" v-model="order.address" required />
            </label>
            <label>
              Shipping Method:
              <select v-model="order.shipping" required>
                <option disabled value="">Please select</option>
                <option v-for="option in shippingOptions" :key="option.label" :value="option.label">{{ option.label }}</option>
              </select>
            </label>
            <label>
              Payment Method:
              <select v-model="order.payment" required>
                <option disabled value="">Please select</option>
                <option value="lynk">Lynk Payment</option>
                <option value="paypal">PayPal</option>
                <option value="ncb">NCB Bank Transfer</option>
                <option value="cod">Cash on Delivery</option>
              </select>
            </label>
            <div v-if="order.payment === 'lynk' || order.payment === 'ncb'" style="margin:10px 0;">
              <b>After payment, please email your payment receipt to <span style="color:#cc6d8c;">mcleodwaydia@gmail.com</span></b>
            </div>
            <div v-if="order.payment === 'paypal'" style="margin:10px 0;">
              <b>After submitting your order, you will be redirected to PayPal to complete payment.</b>
            </div>
            <div v-if="order.payment === 'lynk'" style="margin:10px 0;">
              <b>After submitting your order, you will be redirected to Lynk to complete payment.</b>
            </div>
            <div v-if="order.payment === 'ncb'" style="margin:10px 0;">
              <b>After submitting your order, bank details will be shown for manual payment.</b>
            </div>
            <div v-if="order.payment === 'cod'" style="margin:10px 0;">
              <b>Cash on Delivery: Please have exact change ready.</b>
            </div>
            <h4>Shipping: {{ formatPrice(selectedShippingCost) }}</h4>
            <h3>Grand Total: {{ formatPrice(cartTotal + selectedShippingCost) }}</h3>
            <button type="submit" class="checkout-btn" style="margin-top:1rem;" :disabled="processingOrder">
              {{ processingOrder ? 'Processing...' : 'Place Order & Pay' }}
            </button>
          </form>
        </div>
        <div v-if="orderSuccess" class="payment-success">
          Thank you! Your order was submitted.<br>
          We'll contact you soon.
        </div>
      </div>
    </div>
    <!-- END FLOATING CART PANEL -->
  </div>
  <script>
    emailjs.init('yEYlWETvh08w892PT');
    new Vue({
      el: '#app',
      data: {
        currency: 'JMD',
        mobileMenu: false,
        showFloatingCart: false,
        showCheckout: false,
        orderSuccess: false,
        processingOrder: false,
        filters: {
          type: '',
          maxPrice: Infinity,
          search: ''
        },
        selectedProduct: null,
        products: [
          {
            id: 1,
            name: 'Pearl Bow Heart Keychain',
            price: 800,
            type: 'bagcharm',
            stock: 0,
            colors: ['White'],
            material: 'Alloy, Faux Pearl',
            description: 'A lovely heart-shaped keychain with a pearl bow accent. Perfect for bags and keys.',
            images: [
              'https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/%F0%9F%96%A4%F0%9F%94%97.jpg?raw=true'
            ],
            currentImage: 0
          },
          {
            id: 2,
            name: 'Puppy Teddy Pendant',
            price: 1000,
            type: 'bagcharm',
            stock: 10,
            colors: ['Brown', 'Beige'],
            material: 'Plush, Alloy',
            description: 'Adorable puppy teddy pendant that adds a cute touch to your bag.',
            images: [
              'https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H78c602610c1c4a27b48322f6a0ac9b8be.webp'
            ],
            currentImage: 0
          },
          {
            id: 3,
            name: 'Batman Lego Keychain',
            price: 850,
            type: 'keychain',
            stock: 0,
            colors: ['Pink', 'Black'],
            material: 'ABS Plastic, Metal Alloy',
            description: 'A fun Batman Lego minifigure keychain. Choose pink or black!',
            images: [
              'https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/Lego%20Accessories%20_%20Pink%20Batman%20Keychain%20_%20Color_%20Black_Pink%20_%20Size_%20Os.jpg?raw=true',
              'https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/SSSS%20Compatible%20with%20Building%20blocks%20Keychain%20Drawing%20School%20Bag%20Pendant%20Chain%20Minifigure%20Building%20Blocks%20Couple%20Gifts%20Toys.jpg?raw=true'
            ],
            currentImage: 0
          },
          {
            id: 4,
            name: 'Miu Style Cat Head Keychain',
            price: 1000,
            type: 'bagcharm',
            stock: 0,
            material: 'Alloy, Enamel',
            description: 'Chic cat head design with Miu flair. Great for cat lovers!',
            images: [
              'https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H4b7310a3a1dc460cb166048ca80bf69e0.webp'
            ],
            currentImage: 0
          },
          {
            id: 5,
            name: 'Miu Style Heart Shaped Keychain',
            price: 1000,
            type: 'bagcharm',
            stock: 0,
            material: 'Alloy, Enamel',
            description: 'Heart-shaped keychain in the iconic Miu style.',
            images: [
              'https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H6eba452254fe438f8e74a90b6a434b87n.webp'
            ],
            currentImage: 0
          },
          {
            id: 6,
            name: 'Dachshund',
            price: 1000,
            type: 'bagcharm',
            stock: 0,
            material: 'Braided Rope, Alloy',
            description: 'High-grade dachshund pendant with braided rope for bags or phone.',
            images: [
              'https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/Iplaynox%20Braided%20Rope%20Keychain%20Pendant%20%E2%80%93%20High-Grade%20Dachshund%20Pendant%20for%20Phone%20Bag%20Accessories%20Style%20A.jpg?raw=true'
            ],
            currentImage: 0
          },
          {
            id: 7,
            name: 'Tennis Racket Keychain',
            price: 1000,
            type: 'keychain',
            stock: 2,
            colors: ['Gold'],
            material: 'Metal Alloy',
            description: 'Mini tennis racket design keychain in gold color.',
            images: [
              'https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H7deef4f9cf394e708254b291e3610bf7w.webp'
            ],
            currentImage: 0
          },
          {
            id: 8,
            name: 'Tennis Racket Keychain + Bible',
            price: 1100,
            type: 'keychain',
            stock: 3,
            material: 'Metal Alloy, Plastic',
            description: 'Tennis racket keychain with a mini Bible charm.',
            images: [
              'https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H4082d5e9abc343d796c724005550d886h.webp'
            ],
            currentImage: 0
          },
          {
            id: 9,
            name: 'Flower Claw Clip',
            price: 500,
            type: 'hairclip',
            stock: 0,
            colors: ['Burgundy', 'Pink', 'Purple', 'Yellow', 'White'],
            material: 'Acrylic',
            description: 'Cute and colorful flower-shaped hair claw clip, available in multiple colors.',
            images: [
              'https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/flower%20hair%20clips.jpg?raw=true',
              'https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/Pink%20Two%20Tone%20Flower%20Hair%20Claw%20Clip%20_%20New%20Look.jpg?raw=true',
              'https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/Lovisa%20Acrylic%20Pink%20Tropical%20Flower%20Claw%20Clip.jpg?raw=true',
              'https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/Token%20Frangipani%20Flower%20Hair%20Claw%20Clip%20Burgundy.jpg?raw=true'
            ],
            currentImage: 0
          },
          {
            id: 10,
            name: "Mini Juice Can Keychain",
            price: 500,
            type: "keychain",
            stock: 29,
            colors: ["Pepsi", "Cola", "Sprite", "Fanta"],
            material: 'Plastic, Alloy',
            description: 'Fun miniature juice can keychain, available in various drink designs.',
            images: [
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H27cf27d492e444ddb51282ca93935ce3z.webp"
            ],
            currentImage: 0
          },
          {
            id: 11,
            name: "Phone Card Display",
            price: 500,
            type: "bagcharm",
            stock: 9,
            colors: ["Phone", "Camera"],
            material: 'Plastic, Alloy',
            description: 'Cute card display charm for your phone or bag.',
            images: [
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H9f663b8f12c24f8f8b74879c4d030c74S.webp",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H6d21aab4925147489a0f0bb799c877dbX.webp"
            ],
            currentImage: 0
          },
          {
            id: 12,
            name: "Turtle Keychain",
            price: 500,
            type: "keychain",
            stock: 8,
            colors: ["White", "Turquoise"],
            material: 'Resin, Alloy',
            description: 'Charming turtle keychain, available in white or turquoise.',
            images: [
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H8e83a2c6fbed4c6ebac4a174e09954fea.webp",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H10c9eef6bd8445acb80b82c8f4f472efB.webp",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H18058d834fa84ab189d1c4bf1e6af3f2S.webp"
            ],
            currentImage: 0
          },
          {
            id: 13,
            name: "Mini Slot Machine",
            price: 1500,
            type: "bagcharm",
            stock: 0,
            colors: ["Pink", "Black", "Gold"],
            material: 'Plastic, Alloy',
            description: 'Mini slot machine bag charm in playful colors.',
            images: [
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H8555a41a4e204f748bbb08d09077622cM.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H19d0ddfce55746acbac5de0a6b07d8d6S.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/Hb378ec6da95c410d9aec3f5f0cfc65e6a.avif"
            ],
            currentImage: 0
          },
          {
            id: 14,
            name: "Tamagotchi Pet Game",
            price: 1500,
            type: "bagcharm",
            stock: 0,
            colors: ["Pink", "Purple", "Clear"],
            material: 'Plastic, Electronics',
            description: 'Classic Tamagotchi digital pet game, works as a bag charm and game.',
            images: [
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/Hc06807d4bdfb4aae95583c897bf9cc0eW.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H50815014fbd44dfd92051b94986e3495k.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/H904166b0da6c4f4a92584bbcb975d0feR.avif"
            ],
            currentImage: 0
          },
          {
            id: 15,
            name: "Heart Keyring",
            price: 300,
            type: "keychain",
            stock: 0,
            colors: ["Pink", "Black"],
            material: 'Stainless steel with UV Printing',
            description: 'Can be used to hold multiple keychains.',
            images: [
              "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/pink%20heart%20carabiner.jpg?raw=true",
              "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/download%20(1).jpg?raw=true",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/main/6%20Pcs%20Heart%20Shaped%20Snap%20Hook%20Aluminum%20Heart%20Key%20Ring%20Keychain%20Clip%20For.jpg"
              ],
            currentImage: 0
          },
          {
            id: 16,
            name: "Hello Kitty Tote Bag",
            price: 1800,
            type: "bag",
            stock: 10,
            colors: ["Dark Pink", "Blush"],
            material: 'Cotton',
            description: 'This large-capacity shoulder bag is perfect for school, work, or weekend errands. With its soft canvas material and comfortable straps, it’s both stylish and functional. Whether you choose the sweet Light Pink or bold Dark Pink, this tote will carry all your essentials with charm.',
            images: [
              "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/1pc%20Sanrio%20Cartoon%20Canvas%20Tote%20Bag,%20Women%20Large%20Capacity%20Commuter%20Shoulder%20Handbag,%20Student%20School%20Versatile%20Carry-All%20Organizer%20Pouch.jpg?raw=true",
              "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/3b6403cac4839f2cb3f167d864cda85f.png?raw=true"
              ],
            currentImage: 0
          },
          {
            id: 17,
            name: "Adhesive Phone Holder",
            price: 600,
            type: "phoneaccessories",
            stock: 0,
            colors: ["Pink", "Black"],
            material: 'Silicone',
            description: 'Keep your phone exactly where you need it with our sleek, ultra-strong Adhesive Phone Holder. Whether you\'re watching TikToks, video calling, or following recipes in the kitchen, this holder sticks securely to any smooth surface—no tools, no mess.',
            images: [
              "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/Octobuddy,%20Silicone%20Suction%20Phone%20Case,%20Suction%20Phone%20Case%20Adhesive%20Mount%20_%20Hands-Free%20Shower%20Phone%20Holder%20_%20Suction%20Cup%20Phone%20Mount%20For%20Kitchen%20Bathroom,%20Black%20+%20Pink.jpg?raw=true",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/main/2Pcs%20Silicone%20Suction%20Cup%20Phone%20Case%20Mount%20Double%20Sided%2C%20Phone%20Accessories%20Hands-Free%20Sticky%20Phone%20Grip%20for%20Selfies%20and%20Videos%2C%20Anti-Slip%20Phone%20Suction%20Grip%20for%20iPhone%20and%20Android%2C%20Pink.jpg"
            ],
            currentImage: 0
          },
          {
            id: 18,
            name: "Lace Bow",
            price: 600,
            type: "bagcharm",
            stock: 10,
            material: 'Polyester, Nylon',
            description: 'Soft, stylish, and multifunctional, this elegant lace bow does it all. Whether you\'re accessorizing your hair or adding flair to your bag, this piece brings a delicate, feminine touch wherever it goes.',
            images: [
              "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/download%20(4).jpg?raw=true",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/main/%F0%93%82%83%20%E0%A3%AA%20%E2%8B%86.jpg"
            ],
            currentImage: 0
          },
            {
              id: 19,
            name: "Kawaii Plushies",
            price: 600,
            type: "bagcharm",
            stock: 11,
              colors: ["Kitty", "Kurby", "Frog", "Dizzy"],
            material: 'Polyester, Nylon',
            description: 'Add an extra sprinkle of cuteness to your bag with these soft and snuggly Kawaii Plushies! Made from cozy polyester and nylon, each charm is designed to bring playful, pastel vibes wherever you go. Whether you clip it to your tote, keys, or backpack, it’s the perfect accessory for kawaii lovers.',
            images: [
              "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/Plushie%20keychains.jpg?raw=true",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/Kitty%20Plush.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/Kurby%20plush.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/Frog%20plush.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/blue%20jewlry%20box.avif"
            ],
            currentImage: 0
          },
            {
              id: 20,
            name: "Jewelry Box",
            price: 1500,
            type: "accessories",
            stock: 11,
              colors: ["Pink", "Black", "Beige", "Blue"],
            material: 'PU Leather, Velvet',
            description: 'Keep your accessories safe and stylish with our compact yet spacious jewelry box. Lined with soft velvet and crafted from durable materials, it’s perfect for storing rings, earrings, necklaces, and more. Whether for travel or your vanity table, this box adds a touch of luxury to your daily routine.',
            images: [
              "https://github.com/waydiamcleod/accessoriesbywaydia.ja/blob/main/Women's%20makeup%20and%20beauty%20products%20_Order%20on%20WhatsApp%20or%20DM%20on%20Instagram%20link%20in%20profile.jpg?raw=true",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/pink%20jewelry%20box.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/black%20jewlry%20box.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/beige%20jewlry%20box.avif",
              "https://raw.githubusercontent.com/waydiamcleod/accessoriesbywaydia.ja/refs/heads/main/Dizzy%20Plush.avif"
            ],
            currentImage: 0
          },
        ],
        cart: [],
        order: {
          name: "",
          email: "",
          phone: "",
          address: "",
          shipping: "",
          payment: ""
        },
        shippingOptions: [
          { label: "Bearer Delivery (Spanish Town) – 700 JMD", value: 700, currency: "JMD" },
          { label: "Bearer Delivery (Portmore) – 750 JMD", value: 750, currency: "JMD" },
          { label: "Bearer Delivery (Kingston) – 900 JMD", value: 900, currency: "JMD" },
          { label: "Zip Mail Post-to-Door – 1000 JMD", value: 1000, currency: "JMD" },
          { label: "Zip Mail Post-to-Post – 700 JMD", value: 700, currency: "JMD" },
          { label: "International – 9 USD", value: 9, currency: "USD" }
        ],
        touchStartX: null,
        touchEndX: null,
        isModalSwipe: false
      },
      computed: {
        filteredProducts() {
          return this.products.filter(product => {
            const matchesType = !this.filters.type || product.type === this.filters.type;
            const matchesPrice = product.price <= this.filters.maxPrice;
            const matchesSearch = !this.filters.search ||
              product.name.toLowerCase().includes(this.filters.search.toLowerCase());
            return matchesType && matchesPrice && matchesSearch;
          });
        },
        cartTotal() {
          return this.cart.reduce((acc, item) => acc + item.price * item.quantity, 0);
        },
        totalQuantity() {
          return this.cart.reduce((acc, item) => acc + item.quantity, 0);
        },
        selectedShippingCost() {
          if (!this.order.shipping) return 0;
          let selected = this.shippingOptions.find(opt => opt.label === this.order.shipping);
          if (!selected) return 0;
          if (selected.currency === "USD") {
            return this.currency === "USD" ? selected.value : selected.value * 150;
          }
          return selected.value;
        }
      },
      watch: {
        cart: {
          handler(newCart) {
            localStorage.setItem('cart', JSON.stringify(newCart));
          },
          deep: true
        }
      },
      methods: {
        formatPrice(price) {
          let converted = price;
          let symbol = "J$";
          if (this.currency === "USD") {
            converted = price / 161;
            symbol = "$";
          }
          return symbol + converted.toFixed(2);
        },
        openProduct(product) {
          this.selectedProduct = Object.assign({}, product);
          this.selectedProduct.currentImage = 0;
        },
        closeProduct() { this.selectedProduct = null; },
        setProductImage(idx) { this.selectedProduct.currentImage = idx; },
        setImage(productIdx, imgIdx) {
          let prod = this.filteredProducts[productIdx];
          let mainIdx = this.products.findIndex(p => p.id === prod.id);
          if (mainIdx !== -1) {
            this.products[mainIdx].currentImage = imgIdx;
          }
        },
        addToCart(product) {
          const color = product.selectedColor || '';
          const id = product.id + (color ? '-' + color : '');
          const item = this.cart.find(i => i.id === id);
          if (item) {
            if (item.quantity < product.stock) item.quantity++;
          } else {
            this.cart.push({
              id: id,
              name: product.name,
              price: product.price,
              quantity: 1,
              color: color,
              stock: product.stock
            });
          }
        },
        removeFromCart(index) { this.cart.splice(index, 1); },
        increaseQuantity(index) {
          const item = this.cart[index];
          if (item.quantity < item.stock) item.quantity++;
        },
        decreaseQuantity(index) {
          const item = this.cart[index];
          if (item.quantity > 1) item.quantity--;
        },
        prevImage(i) {
          const prod = this.filteredProducts[i];
          if (!prod.images) return;
          prod.currentImage = (prod.currentImage === 0) ? prod.images.length - 1 : prod.currentImage - 1;
        },
        nextImage(i) {
          const prod = this.filteredProducts[i];
          if (!prod.images) return;
          prod.currentImage = (prod.currentImage + 1) % prod.images.length;
        },
        touchStart(e, i, isModal = false) {
          this.touchStartX = e.changedTouches[0].screenX;
          this.isModalSwipe = isModal;
        },
        touchMove(e, i, isModal = false) {
          this.touchEndX = e.changedTouches[0].screenX;
          this.isModalSwipe = isModal;
        },
        touchEnd(e, i, isModal = false) {
          if (this.touchStartX === null || this.touchEndX === null) return;
          if (this.isModalSwipe && this.selectedProduct) {
            if (this.touchEndX - this.touchStartX > 40) {
              this.selectedProduct.currentImage =
                (this.selectedProduct.currentImage === 0)
                  ? this.selectedProduct.images.length - 1
                  : this.selectedProduct.currentImage - 1;
            } else if (this.touchStartX - this.touchEndX > 40) {
              this.selectedProduct.currentImage =
                (this.selectedProduct.currentImage + 1) % this.selectedProduct.images.length;
            }
          } else if (!this.isModalSwipe && i !== -1) {
            if (this.touchEndX - this.touchStartX > 40) {
              this.prevImage(i);
            } else if (this.touchStartX - this.touchEndX > 40) {
              this.nextImage(i);
            }
          }
          this.touchStartX = null;
          this.touchEndX = null;
          this.isModalSwipe = false;
        },
        submitOrder() {
          if (this.processingOrder) return;
          this.processingOrder = true;
          if (
            !this.order.name ||
            !this.order.email ||
            !this.order.phone ||
            !this.order.address ||
            !this.order.shipping ||
            !this.order.payment
          ) {
            alert("Please fill out all fields.");
            this.processingOrder = false;
            return;
          }
          const totalAmount = this.cartTotal + this.selectedShippingCost;
          if (this.order.payment === 'paypal') {
            window.open(`https://www.paypal.me/WaydiaMcLeod/${totalAmount}`, "_blank");
            this.finishOrder();
            return;
          }
          if (this.order.payment === 'lynk') {
            window.open("https://deep.lynk.us/6Eae", "_blank");
            this.finishOrder();
            return;
          }
          if (this.order.payment === 'ncb') {
            alert(`Please transfer J$${totalAmount} to:\nAccount: 475001613\nName: Waydia McLeod\nBranch: St.Jago Shopping Center Branch\nAfter payment, send proof to mcleodwaydia@gmail.com.`);
            this.finishOrder();
            return;
          }
          if (this.order.payment === 'cod') {
            alert("Order placed! Please have exact change ready for Cash on Delivery.");
            this.finishOrder();
            return;
          }
        },
        finishOrder() {
          const orderDetails = `
Name: ${this.order.name}
Email: ${this.order.email}
Phone: ${this.order.phone}
Address: ${this.order.address}
Shipping: ${this.order.shipping}
Payment: ${this.order.payment}
Cart: ${this.cart.map(i => `${i.name}${i.color ? ' (' + i.color + ')' : ''} x${i.quantity}`).join(', ')}
Grand Total: J$${(this.cartTotal + this.selectedShippingCost).toFixed(2)}
`;
          const now = new Date();
          const formattedTime = now.toLocaleString();
          Promise.all([
            emailjs.send("service_qpk2hk8", "template_qd12s7x", {
              customer_name: this.order.name,
              customer_email: this.order.email,
              product_name: this.cart.map(i => i.name).join(', '),
              quantity: this.cart.reduce((sum, i) => sum + i.quantity, 0),
              shipping_method: this.order.shipping,
              notes: this.order.notes || '',
              message: orderDetails,
              time: formattedTime,
              name: this.order.name
            }),
            emailjs.send("service_qpk2hk8", "template_b0dsexd", {
              customer_name: this.order.name,
              customer_email: this.order.email,
              order_summary: orderDetails
            })
          ])
          .then(() => {
            this.cart.forEach(cartItem => {
              const product = this.products.find(p => p.id == cartItem.id.split('-')[0]);
              if (product) {
                product.stock -= cartItem.quantity;
                if (product.stock < 0) product.stock = 0;
              }
            });
            this.orderSuccess = true;
            this.processingOrder = false;
            setTimeout(() => {
              this.cart = [];
              this.showCheckout = false;
              this.orderSuccess = false;
              this.order = { name: "", email: "", phone: "", address: "", shipping: "", payment: "", notes: "" };
              localStorage.setItem('cart', JSON.stringify([]));
            }, 3500);
          })
          .catch((error) => {
            alert("Order placed but failed to send notification. Error: " + (error?.text || JSON.stringify(error)));
            this.processingOrder = false;
            this.orderSuccess = true;
            setTimeout(() => {
              this.cart = [];
              this.showCheckout = false;
              this.orderSuccess = false;
              this.order = { name: "", email: "", phone: "", address: "", shipping: "", payment: "", notes: "" };
              localStorage.setItem('cart', JSON.stringify([]));
            }, 3500);
          });
        }
      },
      mounted() {
        const savedCart = localStorage.getItem('cart');
        if (savedCart) {
          try {
            this.cart = JSON.parse(savedCart);
          } catch {
            this.cart = [];
          }
        }
      }
    });
  </script>
</body>
</html>
